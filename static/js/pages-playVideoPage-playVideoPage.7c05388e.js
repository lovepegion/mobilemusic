(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-playVideoPage-playVideoPage"],{"06c5":function(t,e,n){"use strict";n("a630"),n("fb6a"),n("d3b7"),n("25f0"),n("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var a=o(n("6b75"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(t){if("string"===typeof t)return(0,a.default)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.default)(t,e):void 0}}},"10a0":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".c-total[data-v-6a1fd5d2]{padding:%?30?% %?24?%;text-align:center;font-weight:bolder}",""]),t.exports=e},"18f5":function(t,e,n){"use strict";var a=n("4ea4");n("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("2909")),i={props:{actived:Boolean},data:function(){return{id:1,type:1,list:[],current:0,processData:{currentTime:0,duration:0},showComment:!1}},computed:{processPer:function(){var t=this.processData,e=t.currentTime,n=t.duration;return Math.ceil(e/n*100)}},watch:{},onLoad:function(t){this.id=t.id,this.type=t.type},onReady:function(){this.getMediaData()},created:function(){},onBackPress:function(){this.pause()},methods:{getMediaData:function(){var t=this,e=this.id,n=this.type;2==n?this.$api.videoDetail({data:{id:e}}).then((function(n){var a=n.data,o={vid:a.vid,title:a.title,videoType:2,coverUrl:a.coverUrl,shareCount:a.shareCount,commentCount:a.commentCount,subCount:a.subCount,creator:[{userName:a.creator.nickname}]};t.list.push(o),t.doPlay(t.current),t.getRelatedAllvideo(e)})).catch((function(){t.getRelatedAllvideo(e)})):this.$api.mvDetail({data:{mvid:e}}).then((function(n){var a=n.data,o={vid:a.id,title:a.name,videoType:1,coverUrl:a.cover,shareCount:a.shareCount,commentCount:a.commentCount,subCount:a.subCount,creator:[{userName:a.artistName}]};t.list.push(o),t.doPlay(t.current),t.getRelatedAllvideo(e)})).catch((function(){}))},onChange:function(t){console.log("onChange",t);var e=t.detail,n=e.current;e.source;try{this.pause(n-1),this.pause(n+1)}catch(t){console.error("暂停视频出错",t)}console.log("------onChange current",n),this.current=n,this.doPlay(n);var a=this.list;n==a.length-1&&this.getRelatedAllvideo(a[a.length-1].vid)},getRelatedAllvideo:function(t){var e=this;this.$api.relatedAllvideo({data:{id:t}}).then((function(t){var n,a=t.data;a.map((function(t){t.videoType=2})),(n=e.list).push.apply(n,(0,o.default)(a)),0==e.current&&e.doPlay(0)}))},doPlay:function(t){var e=this.list[t];e.url?this.play(t):2===e.videoType?this.playVideo(t):this.playMv(t)},playVideo:function(t){var e=this,n=this.list,a=n[t];a&&(console.log("playVideo",a),a.url||this.$api.videoUrl({data:{id:a.vid}}).then((function(n){var o=n.urls;o&&o.length>0?(a.url=o[0],a.urls=o,e.$set(e.list,t,a)):e.showNoneToast({title:"播放地址找不到"})})))},playMv:function(t){var e=this,n=this.list,a=n[t];a&&(a.url||this.$api.mvUrl({data:{id:a.vid}}).then((function(n){var o=n.data;o?(a.url=o,e.$set(e.list,t,a)):e.showNoneToast({title:"播放地址找不到"})})))},videoErrorCallback:function(t){console.error("videoErrorCallback",t)},onLoadedmetadata:function(t){var e=this.current;this.doPlay(e)},onPlay:function(t){console.log("onPlay",t);var e=t.detail,n=t.currentTarget;this.processData=e,this.doPauseAudio();var a=n.dataset.set.index,o=this.list[a];o.playing=!0,this.$set(this.list,a,o)},onUpdateTime:function(t){var e=t.detail;this.processData=e},onPause:function(t){console.log("onPause",t);t.detail;var e=t.currentTarget.dataset.set,n=e.index,a=this.list[n];a.playing=!1,this.$set(this.list,n,a)},openComment:function(){var t=this;this.showComment=!0,this.$nextTick((function(){var e=t.current,n=t.list,a=n[e],o=2===a.videoType?5:1;t.$refs.comments.getList({type:o,id:a.vid})}))},controlstoggle:function(t){console.debug(t,"controlstoggle")},onActive:function(){console.debug("onActive--mv--tab"),this.play()},onHidden:function(){console.debug("onHidden--mv--tab"),this.pause()},pause:function(t){t||(t=this.current);var e=uni.createVideoContext("mVideo"+t);e?e.pause():console.log("video 上下文不存在")},play:function(t){t||(t=this.current);var e=uni.createVideoContext("mVideo"+t);e?e.play():console.log("video 上下文不存在")},onClickVideo:function(t){console.log("onClickVideo",t);t.detail;var e=t.currentTarget.dataset.set,n=e.index,a=this.list[n],o=a.playing;!0===o?this.pause(n):this.play(n)}}};e.default=i},"21f4":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uNavbar:n("4c4c").default,uIcon:n("dc9d").default,uLineProgress:n("bf79").default,uPopup:n("ffdd").default,sqComments:n("5dff").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"video-page"},[n("u-navbar",{attrs:{"border-bottom":!1,height:55,immersive:!0,background:{background:"transparent"}}}),n("v-uni-swiper",{staticClass:"swiper",attrs:{vertical:!0,autoplay:!1,current:t.current,duration:200},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)}}},t._l(t.list,(function(e,a){return n("v-uni-swiper-item",{key:a},[a==t.current||a==t.current-1||a==t.current+1?n("v-uni-view",{staticClass:"swiper-item",attrs:{"data-set":{index:a}}},[e.url?n("v-uni-video",{ref:"mVideo"+a,refInFor:!0,staticClass:"m-video",attrs:{id:"mVideo"+a,"data-set":{index:a},src:e.url.url,poste:e.coverUrl,loop:!0,"show-loading":!1,autoplay:!1,objectFit:"contain","enable-progress-gesture":!1,"show-fullscreen-btn":!1,"danmu-btn":!1,"enable-danmu":!1,"webkit-playsinline":!0,playsinline:!0,"x5-playsinline":!0,"x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-orientation":"portraint","x5-video-player-fullscreen":"",controls:!1},on:{loadedmetadata:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoadedmetadata.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.videoErrorCallback.apply(void 0,arguments)},play:function(e){arguments[0]=e=t.$handleEvent(e),t.onPlay.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.onUpdateTime.apply(void 0,arguments)},pause:function(e){arguments[0]=e=t.$handleEvent(e),t.onPause.apply(void 0,arguments)},controlstoggle:function(e){arguments[0]=e=t.$handleEvent(e),t.controlstoggle.apply(void 0,arguments)},click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onClickVideo.apply(void 0,arguments)}}}):t._e(),n("v-uni-view",{staticClass:"controls-box"},[n("v-uni-view",{staticClass:"top-info"},[n("v-uni-view",{staticClass:"detail-box"},[n("v-uni-view",{staticClass:"artist-name"},[t._v("@"+t._s(e.creator?e.creator.map((function(t){return t.userName})).join(","):"未知"))]),n("v-uni-view",{staticClass:"name line-2"},[t._v(t._s(e.title))])],1),n("v-uni-view",{staticClass:"operation-box flex-column"},[n("u-icon",{staticClass:"o-icon",attrs:{size:60,"label-color":"#ffffff",label:e.subCount||"",name:"thumb-up-fill","label-pos":"bottom"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showDevToast.apply(void 0,arguments)}}}),n("u-icon",{staticClass:"o-icon",attrs:{size:60,"label-color":"#ffffff",label:e.commentCount||"",name:"chat-fill","label-pos":"bottom"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openComment.apply(void 0,arguments)}}})],1)],1),n("u-line-progress",{attrs:{height:"5","show-percent":!1,"active-color":"#e51419",percent:t.processPer}})],1)],1):t._e()],1)})),1),n("u-popup",{staticStyle:{"z-index":"999"},attrs:{"safe-area-inset-bottom":!0,closeable:!0,mode:"bottom","border-radius":"10",height:"800rpx"},model:{value:t.showComment,callback:function(e){t.showComment=e},expression:"showComment"}},[n("sq-comments",{ref:"comments"})],1)],1)},i=[]},"225a":function(t,e,n){"use strict";n.r(e);var a=n("312a"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},2482:function(t,e,n){"use strict";var a=n("e29e"),o=n.n(a);o.a},2909:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var a=s(n("6005")),o=s(n("db90")),i=s(n("06c5")),r=s(n("3427"));function s(t){return t&&t.__esModule?t:{default:t}}function d(t){return(0,a.default)(t)||(0,o.default)(t)||(0,i.default)(t)||(0,r.default)()}},"2d63":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/**\n * uView 组件\n */\n/* uni.scss */.u-progress[data-v-3d9270e0]{overflow:hidden;height:15px;display:inline-flex;align-items:center;width:100%;border-radius:%?100?%}.u-active[data-v-3d9270e0]{width:0;height:100%;align-items:center;\ndisplay:flex;flex-direction:row;\njustify-items:flex-end;justify-content:space-around;font-size:%?20?%;color:#fff;transition:all .4s ease}.u-striped[data-v-3d9270e0]{background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-size:39px 39px}.u-striped-active[data-v-3d9270e0]{-webkit-animation:progress-stripes-data-v-3d9270e0 2s linear infinite;animation:progress-stripes-data-v-3d9270e0 2s linear infinite}@-webkit-keyframes progress-stripes-data-v-3d9270e0{0%{background-position:0 0}100%{background-position:39px 0}}@keyframes progress-stripes-data-v-3d9270e0{0%{background-position:0 0}100%{background-position:39px 0}}',""]),t.exports=e},"312a":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:function(){return{}},computed:{progressStyle:function(){var t={};return t.width=this.percent+"%",this.activeColor&&(t.backgroundColor=this.activeColor),t}},methods:{}};e.default=a},3427:function(t,e,n){"use strict";function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"40c4":function(t,e,n){"use strict";var a=n("4c90"),o=n.n(a);o.a},"4c90":function(t,e,n){var a=n("df8c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("495ea879",a,!0,{sourceMap:!1,shadowMode:!1})},5101:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uIcon:n("dc9d").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"comment-box"},[n("v-uni-view",{staticClass:"avatar-box"},[n("v-uni-image",{staticClass:"avatar",attrs:{src:t.item.user.avatarUrl}})],1),n("v-uni-view",{staticClass:"info-box"},[n("v-uni-view",{staticClass:"user-name-box flex"},[n("v-uni-view",[n("v-uni-view",{staticClass:"user-name"},[t._v(t._s(t.item.user.nickname))]),n("v-uni-view",{staticClass:"date"},[t._v(t._s(t.formatTime(t.item.time)))])],1),n("v-uni-view",{staticClass:"like-bt"},[t._v(t._s(t.item.likedCount)),n("u-icon",{attrs:{name:"thumb-up"}})],1)],1),n("v-uni-view",{staticClass:"content"},[t._v(t._s(t.item.content))])],1)],1)},i=[]},"54c6":function(t,e,n){var a=n("2d63");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("590edfdc",a,!0,{sourceMap:!1,shadowMode:!1})},"55b7":function(t,e,n){"use strict";n.r(e);var a=n("18f5"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"5c4d":function(t,e,n){"use strict";n.r(e);var a=n("f1c2"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"5d57":function(t,e,n){"use strict";n.r(e);var a=n("21f4"),o=n("55b7");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("40c4");var r,s=n("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"de280702",null,!1,a["a"],r);e["default"]=d.exports},"5dff":function(t,e,n){"use strict";n.r(e);var a=n("8a73"),o=n("b949");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("766f");var r,s=n("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"6a1fd5d2",null,!1,a["a"],r);e["default"]=d.exports},"5e54":function(t,e,n){var a=n("10a0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("1411a0d4",a,!0,{sourceMap:!1,shadowMode:!1})},6005:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var a=o(n("6b75"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t))return(0,a.default)(t)}},"6b75":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"766f":function(t,e,n){"use strict";var a=n("5e54"),o=n.n(a);o.a},"82ae":function(t,e,n){"use strict";var a=n("54c6"),o=n.n(a);o.a},"8a73":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={sqCommentItem:n("cd3f").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"c-total"},[t._v("热门评论("+t._s(t.formatNumber(t.total))+")")]),t._l(t.hotComments,(function(t,e){return n("sq-comment-item",{key:e,attrs:{item:t}})}))],2)},i=[]},b949:function(t,e,n){"use strict";n.r(e);var a=n("e685"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},bf79:function(t,e,n){"use strict";n.r(e);var a=n("d9f1"),o=n("225a");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("82ae");var r,s=n("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"3d9270e0",null,!1,a["a"],r);e["default"]=d.exports},cd3f:function(t,e,n){"use strict";n.r(e);var a=n("5101"),o=n("5c4d");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("2482");var r,s=n("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"62bfd470",null,!1,a["a"],r);e["default"]=d.exports},d9f1:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"u-progress",style:{borderRadius:t.round?"100rpx":0,height:t.height+"rpx",backgroundColor:t.inactiveColor}},[n("v-uni-view",{staticClass:"u-active",class:[t.type?"u-type-"+t.type+"-bg":"",t.striped?"u-striped":"",t.striped&&t.stripedActive?"u-striped-active":""],style:[t.progressStyle]},[t.$slots.default?t._t("default"):t.showPercent?[t._v(t._s(t.percent+"%"))]:t._e()],2)],1)},i=[]},db90:function(t,e,n){"use strict";function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},df8c:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".video-page[data-v-de280702]{width:100%;height:100%;position:fixed;top:0;left:0;background-color:#333}.video-box[data-v-de280702]{width:100%;height:100%;position:relative}.swiper[data-v-de280702]{width:100%;height:100%;position:relative}.swiper-item[data-v-de280702]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.swiper-item .video-bg[data-v-de280702]{width:100%;height:100%;overflow:hidden;position:absolute;top:0;left:0}.swiper-item .video-bg .bg-image[data-v-de280702]{width:100%;height:100%}.uni-bg-red[data-v-de280702]{background-color:#ff201f}.uni-bg-green[data-v-de280702]{background-color:#00b26a}.uni-bg-blue[data-v-de280702]{background-color:#007aff}.m-video[data-v-de280702]{width:100%;\n}\n\n/**\n * 视频上层的信息\n */.controls-box[data-v-de280702]{width:100%;height:auto;position:absolute;left:0;bottom:0;color:#fff;padding:%?30?% %?20?%;z-index:9999}.controls-box .top-info[data-v-de280702]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-end;padding:%?10?% %?10?%}\n\n/**\n * 视频信息\n */.controls-box .detail-box[data-v-de280702]{width:0;box-sizing:border-box;padding:%?10?%;flex:1}.controls-box .detail-box .name[data-v-de280702]{font-size:%?28?%;font-weight:bolder;margin-bottom:%?15?%;margin-top:%?15?%}.controls-box .operation-box[data-v-de280702]{width:%?100?%;font-size:%?30?%;text-align:right;padding:0 %?24?%;box-sizing:border-box}.controls-box .operation-box .o-icon[data-v-de280702]{margin-bottom:%?30?%;transition:all .2s ease}.controls-box .operation-box .o-icon[data-v-de280702]:active{-webkit-transform:scale(.8);transform:scale(.8)}\n\n/* 播放按钮 */.play-bt[data-v-de280702]{position:absolute;width:100%;height:100%;display:flex;z-index:99;align-items:center;justify-content:center}",""]),t.exports=e},e29e:function(t,e,n){var a=n("f5ab");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("1bb25dfe",a,!0,{sourceMap:!1,shadowMode:!1})},e685:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{type:String},data:function(){return{hotComments:[],total:0}},computed:{},created:function(){},methods:{getList:function(t){var e=this,n=t.id,a=t.type,o=t.limit;this.$api.commentHot({data:{type:a,id:n,limit:o||30}}).then((function(t){e.hotComments=t.hotComments,e.total=t.total}))}}};e.default=a},f1c2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{item:Object},data:function(){return{}},computed:{},created:function(){},methods:{}};e.default=a},f5ab:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".comment-box[data-v-62bfd470]{width:100%;display:flex;flex-wrap:nowrap;padding:%?24?% %?24?%;border-bottom-color:#f0f0f0;border-bottom-style:solid;border-bottom-width:%?1?%;color:#333}.comment-box .avatar-box .avatar[data-v-62bfd470]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?24?%}.comment-box .info-box[data-v-62bfd470]{width:0;flex:1}.comment-box .user-name-box[data-v-62bfd470]{justify-content:space-between;align-items:center;margin-bottom:%?10?%}.comment-box .user-name-box .like-bt[data-v-62bfd470]{font-size:%?26?%}.comment-box .user-name-box .user-name[data-v-62bfd470]{font-size:%?28?%}.comment-box .user-name-box .date[data-v-62bfd470]{font-size:%?24?%;color:#999}",""]),t.exports=e}}]);